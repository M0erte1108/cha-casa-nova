<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ch치 de Casa Nova - Bruna e Daniel</title>
  <style>
    body { font-family: "Poppins", sans-serif; background-color: #f8f6f2; color: #4a403a; margin: 0; padding: 0; }
    header { text-align: center; background-color: #f4e9db; padding-bottom: 30px; }
    header img { width: 100%; max-height: 300px; object-fit: cover; border-bottom: 3px solid #d1bfa7; }
    header h1 { font-size: 2em; margin: 20px 0 10px 0; color: #4a403a; }
    header p { font-size: 1.1em; color: #5a524c; margin: 0 20px; }
    .container { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 20px; padding: 30px; max-width: 1200px; margin: auto; }
    .item { background: #ffffff; border-radius: 10px; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08); padding: 20px; transition: transform 0.2s ease; position: relative; }
    .item:hover { transform: translateY(-3px); }
    .item h3 { font-size: 1.1em; margin-bottom: 10px; color: #3b322c; }
    .item a { color: #937b61; text-decoration: none; font-weight: 500; }
    .btn-escolher { display: inline-block; margin-top: 15px; background-color: #cbb89d; color: #fff; padding: 10px 16px; border: none; border-radius: 6px; cursor: pointer; font-size: 0.9em; transition: background 0.2s; }
    .btn-escolher:hover { background-color: #b89f7a; }
    .item.escolhido { opacity: 0.5; pointer-events: none; }
    .item.escolhido::after { content: "游꾸 J치 Escolhido"; position: absolute; top: 10px; right: 10px; background: #b89f7a; color: white; padding: 5px 10px; border-radius: 5px; font-size: 0.8em; }
    .whatsapp-container { text-align: center; margin: 30px 0 60px 0; }
    .whatsapp-btn { background-color: #25D366; color: white; font-size: 1em; padding: 14px 26px; border-radius: 8px; text-decoration: none; transition: background 0.2s; display: inline-block; }
    .whatsapp-btn:hover { background-color: #1da955; }
  </style>

  <!-- Firebase -->
  <script src="https://www.gstatic.com/firebasejs/10.15.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.15.0/firebase-firestore-compat.js"></script>
</head>
<body>

  <header>
    <img src="https://images.unsplash.com/photo-1600585154340-be6161a56a0c?auto=format&fit=crop&w=1600&q=80" alt="Decora칞칚o de Casa Nova">
    <h1>Ch치 de Casa Nova da Bruna & Daniel</h1>
    <p>游눝 Seja bem-vindo(a)! Escolha um presente para ajudar a montar o novo lar com amor e carinho.</p>
  </header>

  <div class="container" id="lista-presentes"></div>

  <div class="whatsapp-container">
    <a class="whatsapp-btn" 
       href="https://wa.me/5511950392090?text=Oi%20Bruna%20e%20Daniel!%20Acabei%20de%20escolher%20um%20presente%20no%20Ch%C3%A1%20de%20Casa%20Nova%20de%20voc%C3%AAs%20游봃" 
       target="_blank">
       游눏 Enviar mensagem
    </a>
  </div>

  <script>
    // Configura칞칚o do Firebase
    const firebaseConfig = {
      apiKey: "SUA_API_KEY",
      authDomain: "SEU_PROJETO.firebaseapp.com",
      projectId: "SEU_PROJETO",
      storageBucket: "SEU_PROJETO.appspot.com",
      messagingSenderId: "SEU_SENDER_ID",
      appId: "SEU_APP_ID"
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();

    // Lista de presentes
    const itens = [
      { nome: "Mop Girat칩rio 8 Litros Fit", link: "https://s.shopee.com.br/AUlWWlxNPO" },
      { nome: "Rodo Limpador De Silicone M치gico", link: "https://s.shopee.com.br/qb117DgJm" },
      { nome: "Gancho Multiuso Suporte Com Adesivo", link: "https://s.shopee.com.br/60J7Ad2PMY" },
      { nome: "Escova de Silicone para Vaso Sanit치rio", link: "https://s.shopee.com.br/3VbmC377c9" },
      { nome: "Varal Dobr치vel Inox", link: "https://s.shopee.com.br/4VUJNuG6tG" },
      { nome: "Kit Banheiro Lavabo 3 pe칞as", link: "https://s.shopee.com.br/gHaosUIbX" },
      { nome: "Mesa Prateleira de Sacada", link: "https://s.shopee.com.br/4ArSzKlRC7" }
    ];

    const container = document.getElementById("lista-presentes");

    async function carregarPresentes() {
      const escolhidosSnap = await db.collection("presentesEscolhidos").get();
      const escolhidos = escolhidosSnap.docs.map(doc => doc.data().link);

      itens.forEach((item) => {
        const card = document.createElement("div");
        card.className = "item";
        if (escolhidos.includes(item.link)) card.classList.add("escolhido");

        const nome = document.createElement("h3");
        nome.textContent = item.nome;

        const link = document.createElement("a");
        link.href = item.link;
        link.target = "_blank";
        link.textContent = "Ver na Shopee";

        const botao = document.createElement("button");
        botao.textContent = "Escolher este presente 游꾸";
        botao.className = "btn-escolher";

        botao.addEventListener("click", async () => {
          if (!escolhidos.includes(item.link)) {
            const docRef = db.collection("presentesEscolhidos").doc(btoa(item.link));
            await docRef.set({ nome: item.nome, link: item.link, escolhidoEm: new Date() });

            card.classList.add("escolhido");
            botao.disabled = true;
          }
        });

        card.appendChild(nome);
        card.appendChild(link);
        card.appendChild(botao);
        container.appendChild(card);
      });
    }

    carregarPresentes();
  </script>

</body>
</html>
